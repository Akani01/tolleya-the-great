{% load static %}
{% load socialaccount %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>C.M.S | Log In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
    <!-- Ionicons (no static tag) -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
    <!-- AdminLTE style -->
    <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css' %}">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <!-- Google Recaptcha -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body class="hold-transition login-page">
    <div class="login-box">
        <div class="login-logo">
            <a href="#"><b>Circuit</b> Management System</a>
        </div>

        <div class="card">
            <div class="card-body login-card-body">

                {% if messages %}
                <div class="col-12">
                    {% for message in messages %}
                        {% if message.tags == 'error' %}
                        <div class="alert alert-danger text-center">
                            {{ message }}
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                <form action="{% url 'user_login' %}" method="post">
                    {% csrf_token %}
                    <!-- Email -->
                    <div class="input-group mb-3">
                        <input required type="email" name="email" class="form-control" placeholder="Email">
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-envelope"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Password -->
                    <div class="input-group mb-1">
                        <input required type="password" name="password" class="form-control" placeholder="Password" id="myInput">
                        <div class="input-group-append">
                            <div class="input-group-text">
                                <span class="fas fa-lock"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Show Password Toggle -->
                    <div class="form-group mb-3">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="showPassword" onclick="togglePassword()">
                            <label class="form-check-label" for="showPassword">Show Password</label>
                        </div>
                    </div>

                    <!-- Remember + Submit -->
                    <div class="row">
                        <div class="col-8">
                            <div class="icheck-primary">
                                <input type="checkbox" id="remember">
                                <label for="remember">Remember Me</label>
                            </div>
                        </div>
                        <div class="col-4">
                            <button type="submit" class="btn btn-success btn-block">Log In</button>
                        </div>
                    </div>
                </form>

                <!-- Social Login -->
                {% get_providers as socialaccount_providers %}
                {% if socialaccount_providers %}
                <div class="socialaccount_ballot mt-3">
                    <a href="{% provider_login_url 'google' %}" class="btn btn-light">
                        <i class="fab fa-google"></i> Sign in with Google
                    </a>
                    <div class="login-or border-top border-bottom my-3 text-center">
                        {% trans 'OR' %}
                    </div>
                </div>
                {% include "socialaccount/snippets/login_extra.html" %}
                {% endif %}

                <!-- Extra Links -->
                <p class="mb-1">
                    <a href="{% url 'password_reset_request' %}">Forgot Password?</a>
                </p>
                <p>
                    Not Registered? Sign Up <a href="{% url 'register_selection' %}">Here...</a>
                </p>

            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'dist/js/adminlte.min.js' %}"></script>

    <!-- Password Toggle Script -->
    <script>
        function togglePassword() {
            var x = document.getElementById("myInput");
            x.type = (x.type === "password") ? "text" : "password";
        }
    </script>

</body>

</html>
