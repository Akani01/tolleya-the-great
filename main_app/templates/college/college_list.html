{% extends 'main_app/base.html' %}
{% load static %}
{% block title %}Colleges | Learning Management System{% endblock title %}

{% block content %}
<!-- Tailwind CDN if not already included -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Breadcrumb -->
<nav class="text-sm text-gray-600 mb-4" aria-label="Breadcrumb">
  <ol class="flex items-center space-x-2">
    <li>
      <a href="/" class="hover:text-blue-600">Home</a>
    </li>
    <li class="mx-1">â€º</li>
    <li class="font-medium text-gray-800">College List</li>
  </ol>
</nav>

<!-- Add New College (Admin Only) -->
{% if request.user.is_superuser %}
<div class="flex justify-end mb-6">
  <a href="{% url 'college_add' %}" 
     class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition flex items-center gap-2">
    <i class="fas fa-plus"></i> Add New College
  </a>
</div>
{% endif %}

<!-- Page Title -->
<div class="flex items-center gap-2 text-2xl font-bold text-gray-800 mb-6">
  <i class="fas fa-university text-blue-600"></i>
  College List
</div>

<!-- Messages -->
{% if messages %}
  <div class="space-y-3 mb-6">
    {% for message in messages %}
      {% if message.tags == 'error' %}
        <div class="bg-red-100 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2">
          <i class="fas fa-exclamation-circle"></i> {{ message }}
        </div>
      {% else %}
        <div class="bg-green-100 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2">
          <i class="fas fa-check-circle"></i> {{ message }}
        </div>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}

<!-- Colleges Grid -->
<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
  {% for college in colleges %}
  <div class="bg-white rounded-2xl shadow p-4 flex flex-col">
    <!-- Image -->
    <img src="{{ college.get_picture }}" alt="{{ college.title }}" 
         class="h-40 w-full object-cover rounded-lg mb-4">

    <!-- Title -->
    <h2 class="text-lg font-semibold text-gray-800 mb-2 truncate">{{ college.title }}</h2>

    <!-- Summary -->
    <p class="text-sm text-gray-600 mb-3 line-clamp-3">{{ college.summary }}</p>

    <!-- Meta -->
    <div class="text-xs text-gray-500 space-y-1 mb-4">
      <p><span class="font-medium">Posted As:</span> {{ college.get_posted_as_display }}</p>
      <p><span class="font-medium">Uploaded:</span> {{ college.upload_time }}</p>
    </div>

    <!-- Actions -->
    <div class="mt-auto flex justify-between items-center">
      <a href="{% url 'college_detail' pk=college.pk %}" 
         class="text-blue-600 hover:underline text-sm font-medium">
        View Details
      </a>

      {% if request.user.is_superuser %}
      <div class="flex gap-2">
        <a href="{% url 'college_update' pk=college.pk %}" 
           class="p-2 rounded-lg bg-yellow-100 text-yellow-700 hover:bg-yellow-200" 
           title="Edit">
          <i class="fas fa-pencil-alt"></i>
        </a>
        <a href="{% url 'college_delete' pk=college.pk %}" 
           class="p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200" 
           title="Delete">
          <i class="fas fa-trash-alt"></i>
        </a>
      </div>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <p class="col-span-full text-center text-gray-500 py-6">
    No Colleges available. 
    {% if request.user.is_superuser %}
      <a href="{% url 'college_add' %}" class="text-blue-600 hover:underline">Add one now</a>.
    {% endif %}
  </p>
  {% endfor %}
</div>


{% endblock content %}
